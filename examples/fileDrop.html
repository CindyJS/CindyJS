<!DOCTYPE html>
<html>

<head>
<title>Cindy JS Example</title>
<meta charset="UTF-8">
<script type="text/javascript" src="../build/js/Cindy.js"></script>
<script id="csinit" type="text/x-cindyscript">

// Initialization code, executed once up front.

</script>
<script id="csdraw" type="text/x-cindyscript">
apply(allimages(), drawimage(A, #));
// Drawing code, executed whenever the canvas gets redrawn.

</script>
<script type="text/javascript">

var cdy = createCindy({ // See ref/createCindy documentation for details.
  ports: [{id: "CSCanvas"}],
  scripts: "cs*",
  language: "en",
  defaultAppearance: {
    // See GeoBasics.js for possible attributes.
  },
                       // images:{rost:"rost.png",boe:"boe.png"},
  geometry: [
    {name:"A", type:"Free", pos:[0,0]},
    // For allowed types, see GeoOps.js.
    // For allowed properties, see csinit in GeoBasics.js.
  ] // End of geometry array.
});

// Remove all comments after adjusting this template for your use case.

</script>
</head>

<body style="font-family:Arial;">
  <canvas id="CSCanvas" width="500" height="500"
          style="border:2px solid black"></canvas>
</body>

<script type="text/javascript">
var dropbox = document.getElementById("CSCanvas");
var drawcode = document.getElementById("csdraw");
dropbox.addEventListener("drop", drop, false);

function drop(e) {
  e.preventDefault();

  var dt = e.dataTransfer;
  var files = dt.files;
  var imname = files[0].name;
  imname = imname.replace(/\.[^/.]+$/, "");

  var cstring =  'drawimage(A,\"' + imname + "\")";
		  console.log(cstring);
  cdy.evokeCS(cstring);
}

function sendImg(imname){
}
</script>

</html>
