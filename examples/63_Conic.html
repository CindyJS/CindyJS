<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
            <title>Cindy JS</title>
            <script type="text/javascript" src="../build/js/Cindy.js"></script>

            </head>

	<body style="font-family:Arial;">

        <h1>Conics</h1>


        <script id='csmove' type='text/x-cindyscript'>
	println(Co.matrix);
	println(Co.center);
	println(Co.dualMatrix);
	println(Co.size);
        </script>


        <div  id="CSCanvas" style="width:600px; height:600px; border:2px solid #000000"></div>

        <div>
          <button id="save">Write to console</button>
        </div>

        <script type="text/javascript">

            var gslp=[
                      {name:"A", type:"Free", pos:[0,4]},
                      {name:"B", type:"Free", pos:[0,3]},
                      {name:"C", type:"Free", pos:[0,-2]},
                      {name:"D", type:"Free", pos:[5,0]},
                      {name:"E", type:"Free", pos:[-6,0]},
		              {name:"Co", type:"ConicBy5", args:["A","B","C","D","E"],color:[0,0,1],alpha:1,size:1},
//		     {name:"l", type:"Join", args:["A", "D"]}
                      ];
            var cdy=CindyJS({canvasname:"CSCanvas",
                        movescript:"csmove",
                        grid:1,
                        snap:true,
                        geometry:gslp});

            var cases = [
                ["parabola1", [0,0,1], [1,1,1], [2,4,1], [-2,4,1], [-1,1,1]],
                ["parabola2", [0, 0, 1], [0, 2, 1], [6, 2, 1], [2, 6, 1], [2, 0, 1]],
                ["hyperbola1", [2,2,1], [1,4,1], [4,1,1], [-4,-1,1], [-1,-4,1]],
                ["degen1", [0,4,1], [0,3,1], [0,-2,1], [5,0,1], [-6,0,1]],
                ["degen2", [0,1,0.25], [0,1,0.3333333333333333], [0,1,-0.5], [1,0.23931623931623938,0.21367521367521372], [1,0,-0.16666666666666666]],
                ["degen3", [0,1,0.25], [0.9999999999999999,-0.7826086956521738,-0.3623188405797101], [0,1,-0.5], [1,0,0.2], [1,0,-0.16666666666666666]],
                ["almost degen", [0,1,0.25], [0.9999999999999999,0.16666666666666666,0.09689922480620154], [0,1,-0.5], [1,0.23931623931623938,0.21367521367521372], [1,0,-0.16666666666666666]],
                ["almost2", [0,1,0.25], [1,0.16666666666666674,0.09689922480620156], [0.6105263157894737,1,-0.26315789473684215], [1,0.24545454545454548,0.2272727272727273], [1,0,-0.16666666666666666]],
                ["almost3", [0,1,0.25], [1,0.7410071942446044,0.1798561151079137], [-0.8492063492063492,1,-0.1984126984126984], [1,0,0.2], [1,0,-0.16666666666666666]],
                ["circle1", [6,1,1], [10,3,1], [10,9,1], [2,9,1], [2,3,1]],
                ["ellipse1", [0.9999999999999999,0.44375,0.15625], [-0.6923076923076923,1,0.07692307692307693], [-0.9565217391304347,1,0.5434782608695652], [1,-0.6503496503496504,0.08741258741258742], [1,-1,1]],
                ["ellipse2", [0,1,0.25], [1,0.7410071942446044,0.1798561151079137], [-0.8492063492063492,1,-0.1984126984126984], [1,-0.18181818181818182,0.10822510822510824], [1,0,-0.16666666666666666]],
                ["corners", [1.0000000000000002,0.7789115646258504,0.08503401360544219], [-0.6923076923076923,1,0.07692307692307693], [1,0.8443396226415094,-0.11792452830188678], [1,-0.6245847176079735,0.08305647840531563], [0.6363636363636365,1,-0.10822510822510824]],
            ];
            var save = document.getElementById("save");
            save.onclick = function() {
                var s = cdy.saveState();
                res = ['"?"'];
                for (var i = 0; i < 5; ++i)
                    res.push("[" + s.geometry[i].pos.join(",") + "]");
                console.log("[" + res.join(", ") + "],");
            };
            cases.forEach(function(c) {
                var btn = document.createElement("button");
                btn.innerHTML = c[0];
                save.parentNode.insertBefore(btn, save);
                btn.onclick = function() {
                    var cmd = "";
                    for (var i = 0; i < 5; ++i)
                        cmd += gslp[i].name + ".homog = [" +
                            c[i + 1].join(", ") + "];";
                    cdy.evokeCS(cmd);
                };
            });
        </script>


	</body>
</html>
