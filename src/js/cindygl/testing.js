nada = "nada"; //instead of Plugin.js
//var myfunctions;

api = {};
api.evaluateAndVal = function(k) {return {"ctype":"number","value":{"real":.23,"imag":0.}}}; //complex number

//DEBUG; @TODO: Remove
console.log(next);

console.log(issubtypeof(type.float, type.int));
console.log(issubtypeof(type.int, type.float));



console.log(lca(type.int, type.float));
console.log(lca(type.float, type.int));
console.log(lca(type.int, type.vec2));


console.log(matchSignature("arctan2", [type.complex,type.float]));


console.log(matchSignature("if", [type.bool, type.int, type.float]));
console.log(matchSignature("if", [type.bool, type.vec2, type.float]));
console.log(matchSignature("if", [type.bool, type.int]));
console.log(matchSignature("+", [type.int, type.int]));






/**
 * TOY-Example; @TODO: remove
 */


//myfunctions = 
//myfunctions = {"#drawgrid$1":{"oper":"#drawgrid$1","body":{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"function","oper":"regional$7","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"b"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmin"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmax"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymin"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymax"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"nx"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ny"}],"modifs":{}},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"b"},{"ctype":"function","oper":"screenbounds$0","args":[],"modifs":{}}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmin"},{"ctype":"infix","oper":"-","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"b"},{"ctype":"number","value":{"real":4,"imag":0}}]},{"ctype":"number","value":{"real":1,"imag":0}}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmax"},{"ctype":"infix","oper":"+","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"b"},{"ctype":"number","value":{"real":2,"imag":0}}]},{"ctype":"number","value":{"real":1,"imag":0}}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymin"},{"ctype":"infix","oper":"-","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"b"},{"ctype":"number","value":{"real":4,"imag":0}}]},{"ctype":"number","value":{"real":2,"imag":0}}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymax"},{"ctype":"infix","oper":"+","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"b"},{"ctype":"number","value":{"real":2,"imag":0}}]},{"ctype":"number","value":{"real":2,"imag":0}}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"nx"},{"ctype":"function","oper":"round$1","args":[{"ctype":"infix","oper":"/","args":[{"ctype":"infix","oper":"-","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmax"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmin"}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}],"modifs":{}}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ny"},{"ctype":"function","oper":"round$1","args":[{"ctype":"infix","oper":"/","args":[{"ctype":"infix","oper":"-","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymax"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymin"}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}],"modifs":{}}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmin"},{"ctype":"infix","oper":"*","args":[{"ctype":"function","oper":"floor$1","args":[{"ctype":"infix","oper":"/","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmin"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}],"modifs":{}},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymin"},{"ctype":"infix","oper":"*","args":[{"ctype":"function","oper":"floor$1","args":[{"ctype":"infix","oper":"/","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymin"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}],"modifs":{}},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]}]},{"ctype":"function","oper":"repeat$3","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"nx"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"x"},{"ctype":"infix","oper":";","args":[{"ctype":"function","oper":"draw$2","args":[{"ctype":"function","oper":"genList","args":[{"ctype":"infix","oper":"+","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmin"},{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"x"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymin"}],"modifs":{}},{"ctype":"function","oper":"genList","args":[{"ctype":"infix","oper":"+","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmin"},{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"x"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymax"}],"modifs":{}}],"modifs":{"color":{"ctype":"infix","oper":"*","args":[{"ctype":"function","oper":"genList","args":[{"ctype":"number","value":{"real":1,"imag":0}},{"ctype":"number","value":{"real":1,"imag":0}},{"ctype":"number","value":{"real":1,"imag":0}}],"modifs":{}},{"value":{"real":0.9,"imag":0},"ctype":"number"}]},"size":{"ctype":"number","value":{"real":1,"imag":0}}}},{"ctype":"void"}]}],"modifs":{}}]},{"ctype":"function","oper":"repeat$3","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ny"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"y"},{"ctype":"infix","oper":";","args":[{"ctype":"function","oper":"draw$2","args":[{"ctype":"function","oper":"genList","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmin"},{"ctype":"infix","oper":"+","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymin"},{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"y"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]}],"modifs":{}},{"ctype":"function","oper":"genList","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmax"},{"ctype":"infix","oper":"+","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymin"},{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"y"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]}],"modifs":{}}],"modifs":{"color":{"ctype":"infix","oper":"*","args":[{"ctype":"function","oper":"genList","args":[{"ctype":"number","value":{"real":1,"imag":0}},{"ctype":"number","value":{"real":1,"imag":0}},{"ctype":"number","value":{"real":1,"imag":0}}],"modifs":{}},{"value":{"real":0.9,"imag":0},"ctype":"number"}]},"size":{"ctype":"number","value":{"real":1,"imag":0}}}},{"ctype":"void"}]}],"modifs":{}}]},"arglist":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]},"f$2":{"oper":"f$2","body":{"ctype":"infix","oper":"+","args":[{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":-5.269207787345638e+72,"imag":6.672049355733727e+72}}],"name":"z"},{"ctype":"variable","stack":[{"ctype":"number","value":{"real":-5.269207787345638e+72,"imag":6.672049355733727e+72}}],"name":"z"}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"c"}]},"arglist":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":-5.269207787345638e+72,"imag":6.672049355733727e+72}}],"name":"z"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"c"}]},"mandle$1":{"oper":"mandle$1","body":{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":-5.269207787345638e+72,"imag":6.672049355733727e+72}}],"name":"z"},{"ctype":"number","value":{"real":0,"imag":0}}]},{"ctype":"function","oper":"repeat$2","args":[{"ctype":"number","value":{"real":8,"imag":0}},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":-5.269207787345638e+72,"imag":6.672049355733727e+72}}],"name":"z"},{"ctype":"function","oper":"f$2","args":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":-5.269207787345638e+72,"imag":6.672049355733727e+72}}],"name":"z"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"c"}],"modifs":{}}]}],"modifs":{}}]},{"ctype":"function","oper":"hue$1","args":[{"ctype":"infix","oper":"/","args":[{"ctype":"function","oper":"arctan2$2","args":[{"ctype":"function","oper":"re$1","args":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":-5.269207787345638e+72,"imag":6.672049355733727e+72}}],"name":"z"}],"modifs":{}},{"ctype":"function","oper":"im$1","args":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":-5.269207787345638e+72,"imag":6.672049355733727e+72}}],"name":"z"}],"modifs":{}}],"modifs":{}},{"ctype":"variable","stack":[{"ctype":"number","value":{"real":3.141592653589793,"imag":0}}],"name":"pi"}]}],"modifs":{}}]},"arglist":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"c"}]}};

api.getMyfunctions = function() {return {"#drawgrid$1":{"oper":"#drawgrid$1","body":{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"function","oper":"regional$7","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"b"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmin"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmax"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymin"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymax"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"nx"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ny"}],"modifs":{}},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"b"},{"ctype":"function","oper":"screenbounds$0","args":[],"modifs":{}}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmin"},{"ctype":"infix","oper":"-","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"b"},{"ctype":"number","value":{"real":4,"imag":0}}]},{"ctype":"number","value":{"real":1,"imag":0}}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmax"},{"ctype":"infix","oper":"+","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"b"},{"ctype":"number","value":{"real":2,"imag":0}}]},{"ctype":"number","value":{"real":1,"imag":0}}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymin"},{"ctype":"infix","oper":"-","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"b"},{"ctype":"number","value":{"real":4,"imag":0}}]},{"ctype":"number","value":{"real":2,"imag":0}}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymax"},{"ctype":"infix","oper":"+","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"b"},{"ctype":"number","value":{"real":2,"imag":0}}]},{"ctype":"number","value":{"real":2,"imag":0}}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"nx"},{"ctype":"function","oper":"round$1","args":[{"ctype":"infix","oper":"/","args":[{"ctype":"infix","oper":"-","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmax"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmin"}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}],"modifs":{}}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ny"},{"ctype":"function","oper":"round$1","args":[{"ctype":"infix","oper":"/","args":[{"ctype":"infix","oper":"-","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymax"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymin"}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}],"modifs":{}}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmin"},{"ctype":"infix","oper":"*","args":[{"ctype":"function","oper":"floor$1","args":[{"ctype":"infix","oper":"/","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmin"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}],"modifs":{}},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymin"},{"ctype":"infix","oper":"*","args":[{"ctype":"function","oper":"floor$1","args":[{"ctype":"infix","oper":"/","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymin"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}],"modifs":{}},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]}]},{"ctype":"function","oper":"repeat$3","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"nx"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"x"},{"ctype":"infix","oper":";","args":[{"ctype":"function","oper":"draw$2","args":[{"ctype":"function","oper":"genList","args":[{"ctype":"infix","oper":"+","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmin"},{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"x"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymin"}],"modifs":{}},{"ctype":"function","oper":"genList","args":[{"ctype":"infix","oper":"+","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmin"},{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"x"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymax"}],"modifs":{}}],"modifs":{"color":{"ctype":"infix","oper":"*","args":[{"ctype":"function","oper":"genList","args":[{"ctype":"number","value":{"real":1,"imag":0}},{"ctype":"number","value":{"real":1,"imag":0}},{"ctype":"number","value":{"real":1,"imag":0}}],"modifs":{}},{"value":{"real":0.9,"imag":0},"ctype":"number"}]},"size":{"ctype":"number","value":{"real":1,"imag":0}}}},{"ctype":"void"}]}],"modifs":{}}]},{"ctype":"function","oper":"repeat$3","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ny"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"y"},{"ctype":"infix","oper":";","args":[{"ctype":"function","oper":"draw$2","args":[{"ctype":"function","oper":"genList","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmin"},{"ctype":"infix","oper":"+","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymin"},{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"y"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]}],"modifs":{}},{"ctype":"function","oper":"genList","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmax"},{"ctype":"infix","oper":"+","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymin"},{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"y"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]}],"modifs":{}}],"modifs":{"color":{"ctype":"infix","oper":"*","args":[{"ctype":"function","oper":"genList","args":[{"ctype":"number","value":{"real":1,"imag":0}},{"ctype":"number","value":{"real":1,"imag":0}},{"ctype":"number","value":{"real":1,"imag":0}}],"modifs":{}},{"value":{"real":0.9,"imag":0},"ctype":"number"}]},"size":{"ctype":"number","value":{"real":1,"imag":0}}}},{"ctype":"void"}]}],"modifs":{}}]},"arglist":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]},"f$2":{"oper":"f$2","body":{"ctype":"infix","oper":"+","args":[{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":0,"imag":0}}],"name":"z"},{"ctype":"variable","stack":[{"ctype":"number","value":{"real":0,"imag":0}}],"name":"z"}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"c"}]},"arglist":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":0,"imag":0}}],"name":"z"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"c"}]},"mandle$1":{"oper":"mandle$1","body":{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":0,"imag":0}}],"name":"z"},{"ctype":"number","value":{"real":0,"imag":0}}]},{"ctype":"function","oper":"repeat$2","args":[{"ctype":"number","value":{"real":8,"imag":0}},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":0,"imag":0}}],"name":"z"},{"ctype":"function","oper":"f$2","args":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":0,"imag":0}}],"name":"z"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"c"}],"modifs":{}}]}],"modifs":{}}]},{"ctype":"function","oper":"hue$1","args":[{"ctype":"infix","oper":"/","args":[{"ctype":"function","oper":"arctan2$2","args":[{"ctype":"function","oper":"re$1","args":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":0,"imag":0}}],"name":"z"}],"modifs":{}},{"ctype":"function","oper":"im$1","args":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":0,"imag":0}}],"name":"z"}],"modifs":{}}],"modifs":{}},{"ctype":"variable","stack":[{"ctype":"number","value":{"real":3.141592653589793,"imag":0}}],"name":"pi"}]}],"modifs":{}}]},{"ctype":"void"}]},"arglist":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"c"}]}};};

/*
{"f$2":{"oper":"f$2","body":{"ctype":"infix","oper":"+","args":[{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":-2.179962618679341e+208,"imag":5.767460321370287e+208}}],"name":"z"},{"ctype":"variable","stack":[{"ctype":"number","value":{"real":-2.179962618679341e+208,"imag":5.767460321370287e+208}}],"name":"z"}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"c"}]},"arglist":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":-2.179962618679341e+208,"imag":5.767460321370287e+208}}],"name":"z"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"c"}]},"mandle$1":{
  "oper":"mandle$1","body":{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":-2.179962618679341e+208,"imag":5.767460321370287e+208}}],"name":"z"},{"ctype":"number","value":{"real":0,"imag":0}}]},{"ctype":"function","oper":"repeat$2","args":[{"ctype":"number","value":{"real":10,"imag":0}},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":-2.179962618679341e+208,"imag":5.767460321370287e+208}}],"name":"z"},{"ctype":"function","oper":"f$2","args":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":-2.179962618679341e+208,"imag":5.767460321370287e+208}}],"name":"z"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"c"}],"modifs":{}}]}],"modifs":{}}]},{"ctype":"function","oper":"hue$1","args":[{"ctype":"function","oper":"arctan2$2","args":[{"ctype":"function","oper":"re$1","args":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":-2.179962618679341e+208,"imag":5.767460321370287e+208}}],"name":"z"}],"modifs":{}},{"ctype":"function","oper":"im$1","args":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":-2.179962618679341e+208,"imag":5.767460321370287e+208}}],"name":"z"}],"modifs":{}}],"modifs":{}}],"modifs":{}}]},"arglist":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"c"}]}};
*/
var toyexpr = {"ctype":"function","oper":"mandle$1","args":[{"ctype":"function","oper":"complex$1","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"#"}],"modifs":{}}],"modifs":{}};
var toyexprsin = {"ctype":"function","oper":"sin$1","args":[{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"#"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"#"}]}],"modifs":{}};


var ifexpr = {"ctype":"function","oper":"if$3","args":[{"ctype":"infix","oper":">","args":[{"ctype":"number","value":{"real":4,"imag":0}},{"ctype":"number","value":{"real":3,"imag":0}}]},{"value":{"real":0.2,"imag":0},"ctype":"number"},{"ctype":"number","value":{"real":1,"imag":0}}],"modifs":{}};


var toyexprwithoutvars = {"ctype":"function","oper":"sqrt$1","args":[{"ctype":"function","oper":"sin$1","args":[{"ctype":"infix","oper":"+","args":[{"ctype":"number","value":{"real":0,"imag":0}},{"ctype":"number","value":{"real":3,"imag":0}}]}],"modifs":{}}],"modifs":{}};


console.log("==========A================");
/*
console.log(typeToString(getType(toyexprwithoutvars,'')));

console.log(typeToString(getType({"ctype":"number","value":{"real":10,"imag":0}},'')));
*/

/*
precompile(toyexpr);

//
//console.log(assigments['']);
console.log(T);

console.log(variables);


console.log(compile(toyexpr, '', true).term);
for(let f in compiledfunctions) {
  console.log(compiledfunctions[f]);
}
*/
/*
console.log("==========================");
console.log(typeToString(getType({ ctype: 'void' }), ''));

console.log(typeToString(getType(
{ ctype: 'infix',
  oper: ';',
  args: 
   [ { ctype: 'number', value: {real: 1.2, imag: 0.} },
     { ctype: 'void' } ] }
     
), ''));


*/
console.log("==========================");
console.log(generateColorPlotProgram(toyexprsin));
console.log("==========================");

//console.log(compile({"ctype":"number","value":{"real":10,"imag":0}},'',true));
console.log("==========================");
/*console.log(compile(
{"ctype":"infix","oper":"+","args":[{"ctype":"number","value":{"real":0,"imag":1}},{"ctype":"number","value":{"real":3,"imag":0}}]}
,'',true));*/
console.log("==========================");

//console.log(generateColorPlotProgram(ifexpr));

//console.log(generateColorPlotProgram({"ctype":"number","value":{"real":10,"imag":0}}));

console.log("===========C===============");
console.log(generateColorPlotProgram(toyexpr));

console.log("==========================");
console.log("fertig :)");

//console.log("========Compiling Renderers...==================");
//let r = new Renderer(toyexprsin, 100, 100)
//console.log(r);




console.log("==========================");
console.log(issubtypeof(nada, type.int));


console.log("==========================");
console.log(generateColorPlotProgram({"ctype":"field","obj":{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"#"},"key":"x"}));


console.log("==========================");

api.getMyfunctions = function() {return {"#drawgrid$1":{"oper":"#drawgrid$1","body":{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"function","oper":"regional$7","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"b"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmin"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmax"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymin"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymax"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"nx"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ny"}],"modifs":{}},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"b"},{"ctype":"function","oper":"screenbounds$0","args":[],"modifs":{}}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmin"},{"ctype":"infix","oper":"-","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"b"},{"ctype":"number","value":{"real":4,"imag":0}}]},{"ctype":"number","value":{"real":1,"imag":0}}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmax"},{"ctype":"infix","oper":"+","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"b"},{"ctype":"number","value":{"real":2,"imag":0}}]},{"ctype":"number","value":{"real":1,"imag":0}}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymin"},{"ctype":"infix","oper":"-","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"b"},{"ctype":"number","value":{"real":4,"imag":0}}]},{"ctype":"number","value":{"real":2,"imag":0}}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymax"},{"ctype":"infix","oper":"+","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"b"},{"ctype":"number","value":{"real":2,"imag":0}}]},{"ctype":"number","value":{"real":2,"imag":0}}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"nx"},{"ctype":"function","oper":"round$1","args":[{"ctype":"infix","oper":"/","args":[{"ctype":"infix","oper":"-","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmax"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmin"}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}],"modifs":{}}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ny"},{"ctype":"function","oper":"round$1","args":[{"ctype":"infix","oper":"/","args":[{"ctype":"infix","oper":"-","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymax"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymin"}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}],"modifs":{}}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmin"},{"ctype":"infix","oper":"*","args":[{"ctype":"function","oper":"floor$1","args":[{"ctype":"infix","oper":"/","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmin"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}],"modifs":{}},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymin"},{"ctype":"infix","oper":"*","args":[{"ctype":"function","oper":"floor$1","args":[{"ctype":"infix","oper":"/","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymin"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}],"modifs":{}},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]}]},{"ctype":"function","oper":"repeat$3","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"nx"},{"ctype":"variable","stack":[{"ctype":"number","value":{"real":2,"imag":0}}],"name":"x"},{"ctype":"infix","oper":";","args":[{"ctype":"function","oper":"draw$2","args":[{"ctype":"function","oper":"genList","args":[{"ctype":"infix","oper":"+","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmin"},{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":2,"imag":0}}],"name":"x"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymin"}],"modifs":{}},{"ctype":"function","oper":"genList","args":[{"ctype":"infix","oper":"+","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmin"},{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":2,"imag":0}}],"name":"x"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymax"}],"modifs":{}}],"modifs":{"color":{"ctype":"infix","oper":"*","args":[{"ctype":"function","oper":"genList","args":[{"ctype":"number","value":{"real":1,"imag":0}},{"ctype":"number","value":{"real":1,"imag":0}},{"ctype":"number","value":{"real":1,"imag":0}}],"modifs":{}},{"value":{"real":0.9,"imag":0},"ctype":"number"}]},"size":{"ctype":"number","value":{"real":1,"imag":0}}}},{"ctype":"void"}]}],"modifs":{}}]},{"ctype":"function","oper":"repeat$3","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ny"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"y"},{"ctype":"infix","oper":";","args":[{"ctype":"function","oper":"draw$2","args":[{"ctype":"function","oper":"genList","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmin"},{"ctype":"infix","oper":"+","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymin"},{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"y"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]}],"modifs":{}},{"ctype":"function","oper":"genList","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmax"},{"ctype":"infix","oper":"+","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymin"},{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"y"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]}],"modifs":{}}],"modifs":{"color":{"ctype":"infix","oper":"*","args":[{"ctype":"function","oper":"genList","args":[{"ctype":"number","value":{"real":1,"imag":0}},{"ctype":"number","value":{"real":1,"imag":0}},{"ctype":"number","value":{"real":1,"imag":0}}],"modifs":{}},{"value":{"real":0.9,"imag":0},"ctype":"number"}]},"size":{"ctype":"number","value":{"real":1,"imag":0}}}},{"ctype":"void"}]}],"modifs":{}}]},"arglist":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]},"f$2":{"oper":"f$2","body":{"ctype":"infix","oper":"+","args":[{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":0,"imag":0}}],"name":"z"},{"ctype":"variable","stack":[{"ctype":"number","value":{"real":0,"imag":0}}],"name":"z"}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"c"}]},"arglist":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":0,"imag":0}}],"name":"z"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"c"}]},"mandle$1":{"oper":"mandle$1","body":{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":0,"imag":0}}],"name":"z"},{"ctype":"number","value":{"real":0,"imag":0}}]},{"ctype":"function","oper":"repeat$2","args":[{"ctype":"number","value":{"real":17,"imag":0}},{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":0,"imag":0}}],"name":"z"},{"ctype":"function","oper":"f$2","args":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":0,"imag":0}}],"name":"z"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"c"}],"modifs":{}}]},{"ctype":"void"}]}],"modifs":{}}]},{"ctype":"function","oper":"if$3","args":[{"ctype":"infix","oper":"<","args":[{"ctype":"function","oper":"abs$1","args":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":0,"imag":0}}],"name":"z"}],"modifs":{}},{"ctype":"number","value":{"real":5,"imag":0}}]},{"ctype":"function","oper":"hue$1","args":[{"ctype":"infix","oper":"/","args":[{"ctype":"function","oper":"arctan2$2","args":[{"ctype":"function","oper":"re$1","args":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":0,"imag":0}}],"name":"z"}],"modifs":{}},{"ctype":"function","oper":"im$1","args":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":0,"imag":0}}],"name":"z"}],"modifs":{}}],"modifs":{}},{"ctype":"variable","stack":[{"ctype":"number","value":{"real":3.141592653589793,"imag":0}}],"name":"pi"}]}],"modifs":{}},{"ctype":"function","oper":"genList","args":[{"ctype":"number","value":{"real":0,"imag":0}},{"ctype":"number","value":{"real":0,"imag":0}},{"ctype":"number","value":{"real":0,"imag":0}}],"modifs":{}}],"modifs":{}}]},"arglist":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"c"}]},"F$1":{"oper":"F$1","body":{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"function","oper":"regional$3","args":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":2,"imag":0}}],"name":"x"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"y"},{"ctype":"variable","stack":[{"ctype":"number","value":{"real":0,"imag":0}}],"name":"z"}],"modifs":{}},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":2,"imag":0}}],"name":"x"},{"ctype":"field","obj":{"ctype":"variable","stack":[{"ctype":"list","value":[{"ctype":"number","value":{"real":1,"imag":0}},{"ctype":"number","value":{"real":2,"imag":0}}]}],"name":"p"},"key":"x"}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"y"},{"ctype":"field","obj":{"ctype":"variable","stack":[{"ctype":"list","value":[{"ctype":"number","value":{"real":1,"imag":0}},{"ctype":"number","value":{"real":2,"imag":0}}]}],"name":"p"},"key":"y"}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":0,"imag":0}}],"name":"z"},{"ctype":"field","obj":{"ctype":"variable","stack":[{"ctype":"list","value":[{"ctype":"number","value":{"real":1,"imag":0}},{"ctype":"number","value":{"real":2,"imag":0}}]}],"name":"p"},"key":"z"}]}]},{"ctype":"infix","oper":"-","args":[{"ctype":"infix","oper":"+","args":[{"ctype":"infix","oper":"+","args":[{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":2,"imag":0}}],"name":"x"},{"ctype":"variable","stack":[{"ctype":"number","value":{"real":2,"imag":0}}],"name":"x"}]},{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"y"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"y"}]}]},{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":0,"imag":0}}],"name":"z"},{"ctype":"variable","stack":[{"ctype":"number","value":{"real":0,"imag":0}}],"name":"z"}]}]},{"ctype":"number","value":{"real":1,"imag":0}}]}]},"arglist":[{"ctype":"variable","stack":[{"ctype":"list","value":[{"ctype":"number","value":{"real":1,"imag":0}},{"ctype":"number","value":{"real":2,"imag":0}}]}],"name":"p"}]},"ray$2":{"oper":"ray$2","body":{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"t"},{"ctype":"function","oper":"genList","args":[{"ctype":"field","obj":{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"pos"},"key":"x"},{"ctype":"field","obj":{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"pos"},"key":"y"},{"ctype":"number","value":{"real":10,"imag":0}}],"modifs":{}}]},"arglist":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"pos"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"t"}]},"dada$2":{"oper":"dada$2","body":{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":2,"imag":0}}],"name":"x"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"t"}]},"arglist":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":2,"imag":0}}],"name":"x"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"t"}]},"eval$2":{"oper":"eval$2","body":{"ctype":"infix","oper":"+","args":[{"ctype":"infix","oper":"*","args":[{"ctype":"infix","oper":"+","args":[{"ctype":"infix","oper":"*","args":[{"ctype":"infix","oper":"+","args":[{"ctype":"infix","oper":"*","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"poly"},{"ctype":"number","value":{"real":4,"imag":0}}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"t"}]},{"ctype":"infix","oper":"_","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"poly"},{"ctype":"number","value":{"real":3,"imag":0}}]}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"t"}]},{"ctype":"infix","oper":"_","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"poly"},{"ctype":"number","value":{"real":2,"imag":0}}]}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"t"}]},{"ctype":"infix","oper":"_","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"poly"},{"ctype":"number","value":{"real":1,"imag":0}}]}]},"arglist":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"poly"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"t"}]}};};

console.log(generateColorPlotProgram(
{"ctype":"function","oper":"F$1","args":[{"ctype":"function","oper":"ray$2","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"#"},{"ctype":"number","value":{"real":3,"imag":0}}],"modifs":{}}],"modifs":{}}
));


console.log("==========================");
console.log(generateColorPlotProgram(
{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"poly"},{"ctype":"function","oper":"genList","args":[{"ctype":"number","value":{"real":1,"imag":0}},{"ctype":"number","value":{"real":2,"imag":0}},{"ctype":"function","oper":"dada$2","args":[{"ctype":"field","obj":{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"#"},"key":"x"},{"ctype":"number","value":{"real":7,"imag":0}}],"modifs":{}},{"ctype":"field","obj":{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"#"},"key":"x"}],"modifs":{}}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ttt"},{"ctype":"function","oper":"complex$1","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"#"}],"modifs":{}}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"c"},{"ctype":"function","oper":"eval$2","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"poly"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ttt"}],"modifs":{}}]}]},{"ctype":"infix","oper":"+","args":[{"ctype":"function","oper":"red$1","args":[{"ctype":"function","oper":"im$1","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"c"}],"modifs":{}}],"modifs":{}},{"ctype":"function","oper":"blue$1","args":[{"ctype":"function","oper":"re$1","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"c"}],"modifs":{}}],"modifs":{}}]}]}
));



console.log("==========================");
api.getMyfunctions = function() {return {"#drawgrid$1":{"oper":"#drawgrid$1","body":{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"function","oper":"regional$7","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"b"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmin"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmax"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymin"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymax"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"nx"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ny"}],"modifs":{}},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"b"},{"ctype":"function","oper":"screenbounds$0","args":[],"modifs":{}}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmin"},{"ctype":"infix","oper":"-","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"b"},{"ctype":"number","value":{"real":4,"imag":0}}]},{"ctype":"number","value":{"real":1,"imag":0}}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmax"},{"ctype":"infix","oper":"+","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"b"},{"ctype":"number","value":{"real":2,"imag":0}}]},{"ctype":"number","value":{"real":1,"imag":0}}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymin"},{"ctype":"infix","oper":"-","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"b"},{"ctype":"number","value":{"real":4,"imag":0}}]},{"ctype":"number","value":{"real":2,"imag":0}}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymax"},{"ctype":"infix","oper":"+","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"b"},{"ctype":"number","value":{"real":2,"imag":0}}]},{"ctype":"number","value":{"real":2,"imag":0}}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"nx"},{"ctype":"function","oper":"round$1","args":[{"ctype":"infix","oper":"/","args":[{"ctype":"infix","oper":"-","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmax"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmin"}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}],"modifs":{}}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ny"},{"ctype":"function","oper":"round$1","args":[{"ctype":"infix","oper":"/","args":[{"ctype":"infix","oper":"-","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymax"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymin"}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}],"modifs":{}}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmin"},{"ctype":"infix","oper":"*","args":[{"ctype":"function","oper":"floor$1","args":[{"ctype":"infix","oper":"/","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmin"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}],"modifs":{}},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymin"},{"ctype":"infix","oper":"*","args":[{"ctype":"function","oper":"floor$1","args":[{"ctype":"infix","oper":"/","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymin"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}],"modifs":{}},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]}]},{"ctype":"function","oper":"repeat$3","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"nx"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"x"},{"ctype":"infix","oper":";","args":[{"ctype":"function","oper":"draw$2","args":[{"ctype":"function","oper":"genList","args":[{"ctype":"infix","oper":"+","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmin"},{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"x"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymin"}],"modifs":{}},{"ctype":"function","oper":"genList","args":[{"ctype":"infix","oper":"+","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmin"},{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"x"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymax"}],"modifs":{}}],"modifs":{"color":{"ctype":"infix","oper":"*","args":[{"ctype":"function","oper":"genList","args":[{"ctype":"number","value":{"real":1,"imag":0}},{"ctype":"number","value":{"real":1,"imag":0}},{"ctype":"number","value":{"real":1,"imag":0}}],"modifs":{}},{"value":{"real":0.9,"imag":0},"ctype":"number"}]},"size":{"ctype":"number","value":{"real":1,"imag":0}}}},{"ctype":"void"}]}],"modifs":{}}]},{"ctype":"function","oper":"repeat$3","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ny"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"y"},{"ctype":"infix","oper":";","args":[{"ctype":"function","oper":"draw$2","args":[{"ctype":"function","oper":"genList","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmin"},{"ctype":"infix","oper":"+","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymin"},{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"y"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]}],"modifs":{}},{"ctype":"function","oper":"genList","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"xmax"},{"ctype":"infix","oper":"+","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"ymin"},{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"y"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]}]}],"modifs":{}}],"modifs":{"color":{"ctype":"infix","oper":"*","args":[{"ctype":"function","oper":"genList","args":[{"ctype":"number","value":{"real":1,"imag":0}},{"ctype":"number","value":{"real":1,"imag":0}},{"ctype":"number","value":{"real":1,"imag":0}}],"modifs":{}},{"value":{"real":0.9,"imag":0},"ctype":"number"}]},"size":{"ctype":"number","value":{"real":1,"imag":0}}}},{"ctype":"void"}]}],"modifs":{}}]},"arglist":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"s"}]},"F$1":{"oper":"F$1","body":{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"function","oper":"regional$3","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"x"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"y"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"z"}],"modifs":{}},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"x"},{"ctype":"field","obj":{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"p"},"key":"x"}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"y"},{"ctype":"field","obj":{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"p"},"key":"y"}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"z"},{"ctype":"field","obj":{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"p"},"key":"z"}]}]},{"ctype":"infix","oper":"-","args":[{"ctype":"infix","oper":"+","args":[{"ctype":"infix","oper":"+","args":[{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"x"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"x"}]},{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"y"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"y"}]}]},{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"z"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"z"}]}]},{"ctype":"number","value":{"real":1,"imag":0}}]}]},"arglist":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"p"}]},"dF$1":{"oper":"dF$1","body":{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"function","oper":"regional$3","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"x"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"y"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"z"}],"modifs":{}},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"x"},{"ctype":"field","obj":{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"p"},"key":"x"}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"y"},{"ctype":"field","obj":{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"p"},"key":"y"}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"z"},{"ctype":"field","obj":{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"p"},"key":"z"}]}]},{"ctype":"function","oper":"genList","args":[{"ctype":"infix","oper":"*","args":[{"ctype":"number","value":{"real":2,"imag":0}},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"x"}]},{"ctype":"infix","oper":"*","args":[{"ctype":"number","value":{"real":2,"imag":0}},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"y"}]},{"ctype":"infix","oper":"*","args":[{"ctype":"number","value":{"real":2,"imag":0}},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"z"}]}],"modifs":{}}]},"arglist":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"p"}]},"ray$2":{"oper":"ray$2","body":{"ctype":"infix","oper":"*","args":[{"ctype":"infix","oper":"*","args":[{"ctype":"function","oper":"genList","args":[{"ctype":"function","oper":"genList","args":[{"ctype":"function","oper":"cos$1","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"time"}],"modifs":{}},{"value":{"real":0,"imag":0},"ctype":"number"},{"ctype":"function","oper":"sin$1","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"time"}],"modifs":{}}],"modifs":{}},{"ctype":"function","oper":"genList","args":[{"value":{"real":0,"imag":0},"ctype":"number"},{"value":{"real":1,"imag":0},"ctype":"number"},{"value":{"real":0,"imag":0},"ctype":"number"}],"modifs":{}},{"ctype":"function","oper":"genList","args":[{"ctype":"infix","oper":"-","args":[{"ctype":"void"},{"ctype":"function","oper":"sin$1","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"time"}],"modifs":{}}]},{"value":{"real":0,"imag":0},"ctype":"number"},{"ctype":"function","oper":"cos$1","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"time"}],"modifs":{}}],"modifs":{}}],"modifs":{}},{"ctype":"function","oper":"genList","args":[{"ctype":"function","oper":"genList","args":[{"value":{"real":1,"imag":0},"ctype":"number"},{"ctype":"number","value":{"real":0,"imag":0}},{"value":{"real":0,"imag":0},"ctype":"number"}],"modifs":{}},{"ctype":"function","oper":"genList","args":[{"ctype":"number","value":{"real":0,"imag":0}},{"ctype":"function","oper":"cos$1","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"time"}],"modifs":{}},{"ctype":"function","oper":"sin$1","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"time"}],"modifs":{}}],"modifs":{}},{"ctype":"function","oper":"genList","args":[{"ctype":"number","value":{"real":0,"imag":0}},{"ctype":"infix","oper":"-","args":[{"ctype":"void"},{"ctype":"function","oper":"sin$1","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"time"}],"modifs":{}}]},{"ctype":"function","oper":"cos$1","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"time"}],"modifs":{}}],"modifs":{}}],"modifs":{}}]},{"ctype":"infix","oper":"+","args":[{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"t"},{"ctype":"function","oper":"genList","args":[{"ctype":"field","obj":{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"pos"},"key":"x"},{"ctype":"field","obj":{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"pos"},"key":"y"},{"ctype":"number","value":{"real":10,"imag":0}}],"modifs":{}}]},{"ctype":"function","oper":"genList","args":[{"ctype":"number","value":{"real":0,"imag":0}},{"ctype":"number","value":{"real":0,"imag":0}},{"ctype":"infix","oper":"-","args":[{"ctype":"void"},{"ctype":"number","value":{"real":2,"imag":0}}]}],"modifs":{}}]}]},"arglist":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"pos"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"t"}]},"eval$2":{"oper":"eval$2","body":{"ctype":"infix","oper":"+","args":[{"ctype":"infix","oper":"*","args":[{"ctype":"infix","oper":"+","args":[{"ctype":"infix","oper":"*","args":[{"ctype":"infix","oper":"+","args":[{"ctype":"infix","oper":"*","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"poly"},{"ctype":"number","value":{"real":4,"imag":0}}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"t"}]},{"ctype":"infix","oper":"_","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"poly"},{"ctype":"number","value":{"real":3,"imag":0}}]}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"t"}]},{"ctype":"infix","oper":"_","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"poly"},{"ctype":"number","value":{"real":2,"imag":0}}]}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"t"}]},{"ctype":"infix","oper":"_","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"poly"},{"ctype":"number","value":{"real":1,"imag":0}}]}]},"arglist":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"poly"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"t"}]},"d$1":{"oper":"d$1","body":{"ctype":"function","oper":"genList","args":[{"ctype":"infix","oper":"_","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"poly"},{"ctype":"number","value":{"real":2,"imag":0}}]},{"ctype":"infix","oper":"*","args":[{"ctype":"number","value":{"real":2,"imag":0}},{"ctype":"infix","oper":"_","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"poly"},{"ctype":"number","value":{"real":3,"imag":0}}]}]},{"ctype":"infix","oper":"*","args":[{"ctype":"number","value":{"real":3,"imag":0}},{"ctype":"infix","oper":"_","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"poly"},{"ctype":"number","value":{"real":4,"imag":0}}]}]},{"ctype":"number","value":{"real":0,"imag":0}}],"modifs":{}},"arglist":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"poly"}]},"bisect$4":{"oper":"bisect$4","body":{"ctype":"function","oper":"if$3","args":[{"ctype":"infix","oper":"<","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"l"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"u"}]},{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"lv"},{"ctype":"function","oper":"eval$2","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"poly"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"l"}],"modifs":{}}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"uv"},{"ctype":"function","oper":"eval$2","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"poly"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"u"}],"modifs":{}}]}]},{"ctype":"function","oper":"if$2","args":[{"ctype":"infix","oper":"<","args":[{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"lv"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"uv"}]},{"ctype":"function","oper":"0repeat$2","args":[{"ctype":"number","value":{"real":20,"imag":0}},{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"m"},{"ctype":"infix","oper":"/","args":[{"ctype":"infix","oper":"+","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"l"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"u"}]},{"ctype":"number","value":{"real":2,"imag":0}}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"mv"},{"ctype":"function","oper":"eval$2","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"p"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"m"}],"modifs":{}}]}]},{"ctype":"function","oper":"if$3","args":[{"ctype":"infix","oper":">","args":[{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"lv"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"mv"}]},{"ctype":"number","value":{"real":0,"imag":0}}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"l"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"m"}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"u"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"m"}]}],"modifs":{}}]},{"ctype":"void"}]}],"modifs":{}}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"def"}],"modifs":{}}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"def"}],"modifs":{}},"arglist":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"poly"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"l"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"u"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"def"}]},"path$1":{"oper":"path$1","body":{"ctype":"infix","oper":"+","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"t"},{"ctype":"infix","oper":"*","args":[{"ctype":"infix","oper":"*","args":[{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"number","value":{"real":0,"imag":1}}],"name":"i"},{"value":{"real":0.1234,"imag":0},"ctype":"number"}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"t"}]},{"ctype":"infix","oper":"-","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"t"},{"ctype":"number","value":{"real":1,"imag":0}}]}]}]},"arglist":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"t"}]},"traceroot$3":{"oper":"traceroot$3","body":{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"dp0"},{"ctype":"function","oper":"d$1","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"p0"}],"modifs":{}}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"dp1"},{"ctype":"function","oper":"d$1","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"p1"}],"modifs":{}}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"t"},{"ctype":"number","value":{"real":0,"imag":0}}]}]},{"ctype":"function","oper":"repeat$2","args":[{"ctype":"number","value":{"real":51,"imag":0}},{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"a1"},{"ctype":"function","oper":"path$1","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"t"}],"modifs":{}}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"a0"},{"ctype":"infix","oper":"-","args":[{"ctype":"number","value":{"real":1,"imag":0}},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"a1"}]}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"r"},{"ctype":"infix","oper":"-","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"r"},{"ctype":"infix","oper":"/","args":[{"ctype":"infix","oper":"+","args":[{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"a0"},{"ctype":"function","oper":"eval$2","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"p0"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"r"}],"modifs":{}}]},{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"a1"},{"ctype":"function","oper":"eval$2","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"p1"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"r"}],"modifs":{}}]}]},{"ctype":"infix","oper":"+","args":[{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"a0"},{"ctype":"function","oper":"eval$2","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"dp0"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"r"}],"modifs":{}}]},{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"a1"},{"ctype":"function","oper":"eval$2","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"dp1"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"r"}],"modifs":{}}]}]}]}]}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"t"},{"ctype":"infix","oper":"+","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"t"},{"ctype":"infix","oper":"/","args":[{"ctype":"number","value":{"real":1,"imag":0}},{"ctype":"number","value":{"real":50,"imag":0}}]}]}]}]},{"ctype":"void"}]}],"modifs":{}}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"r"}]},"arglist":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"p0"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"p1"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"r"}]},"makebetter$2":{"oper":"makebetter$2","body":{"ctype":"function","oper":"if$3","args":[{"ctype":"infix","oper":"<","args":[{"ctype":"function","oper":"abs$1","args":[{"ctype":"function","oper":"im$1","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"new"}],"modifs":{}}],"modifs":{}},{"value":{"real":0.01,"imag":0},"ctype":"number"}]},{"ctype":"function","oper":"min$2","args":[{"ctype":"function","oper":"re$1","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"new"}],"modifs":{}},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"old"}],"modifs":{}},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"old"}],"modifs":{}},"arglist":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"old"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"new"}]},"firstroot$1":{"oper":"firstroot$1","body":{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"p0"},{"ctype":"function","oper":"genList","args":[{"ctype":"number","value":{"real":0,"imag":0}},{"ctype":"infix","oper":"-","args":[{"ctype":"void"},{"ctype":"number","value":{"real":1,"imag":0}}]},{"ctype":"number","value":{"real":0,"imag":0}},{"ctype":"number","value":{"real":1,"imag":0}}],"modifs":{}}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"res"},{"ctype":"variable","stack":[{"ctype":"number","value":{"real":1000,"imag":0}}],"name":"oo"}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"res"},{"ctype":"function","oper":"makebetter$2","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"res"},{"ctype":"function","oper":"traceroot$3","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"p0"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"poly"},{"ctype":"infix","oper":"-","args":[{"ctype":"void"},{"ctype":"number","value":{"real":1,"imag":0}}]}],"modifs":{}}],"modifs":{}}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"res"},{"ctype":"function","oper":"makebetter$2","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"res"},{"ctype":"function","oper":"traceroot$3","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"p0"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"poly"},{"ctype":"number","value":{"real":0,"imag":0}}],"modifs":{}}],"modifs":{}}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"res"},{"ctype":"function","oper":"makebetter$2","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"res"},{"ctype":"function","oper":"traceroot$3","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"p0"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"poly"},{"ctype":"number","value":{"real":1,"imag":0}}],"modifs":{}}],"modifs":{}}]}]},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"res"}]},"arglist":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"poly"}]},"computeColor$1":{"oper":"computeColor$1","body":{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"polyvalues"},{"ctype":"function","oper":"genList","args":[{"ctype":"function","oper":"F$1","args":[{"ctype":"function","oper":"ray$2","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"pos"},{"ctype":"number","value":{"real":0,"imag":0}}],"modifs":{}}],"modifs":{}},{"ctype":"function","oper":"F$1","args":[{"ctype":"function","oper":"ray$2","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"pos"},{"ctype":"number","value":{"real":5,"imag":0}}],"modifs":{}}],"modifs":{}},{"ctype":"function","oper":"F$1","args":[{"ctype":"function","oper":"ray$2","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"pos"},{"ctype":"number","value":{"real":10,"imag":0}}],"modifs":{}}],"modifs":{}},{"ctype":"function","oper":"F$1","args":[{"ctype":"function","oper":"ray$2","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"pos"},{"ctype":"number","value":{"real":15,"imag":0}}],"modifs":{}}],"modifs":{}}],"modifs":{}}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"poly"},{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"list","value":[{"ctype":"list","value":[{"ctype":"number","value":{"real":1,"imag":0}},{"ctype":"number","value":{"real":0,"imag":0}},{"ctype":"number","value":{"real":0,"imag":0}},{"ctype":"number","value":{"real":0,"imag":0}}]},{"ctype":"list","value":[{"ctype":"number","value":{"real":0,"imag":0}},{"ctype":"number","value":{"real":0.6,"imag":0}},{"ctype":"number","value":{"real":-0.3,"imag":0}},{"ctype":"number","value":{"real":0.06666666666666661,"imag":0}}]},{"ctype":"list","value":[{"ctype":"number","value":{"real":0,"imag":0}},{"ctype":"number","value":{"real":-0.1,"imag":0}},{"ctype":"number","value":{"real":0.08,"imag":0}},{"ctype":"number","value":{"real":-0.019999999999999997,"imag":0}}]},{"ctype":"list","value":[{"ctype":"number","value":{"real":0,"imag":0}},{"ctype":"number","value":{"real":0.004,"imag":0}},{"ctype":"number","value":{"real":-0.004,"imag":0}},{"ctype":"number","value":{"real":0.0013333333333333333,"imag":0}}]}]}],"name":"B"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"polyvalues"}]}]}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"froot"},{"ctype":"function","oper":"firstroot$1","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"poly"}],"modifs":{}}]}]},{"ctype":"function","oper":"if$3","args":[{"ctype":"infix","oper":"==","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"froot"},{"ctype":"variable","stack":[{"ctype":"number","value":{"real":1000,"imag":0}}],"name":"oo"}]},{"ctype":"function","oper":"blue$1","args":[{"value":{"real":0.3,"imag":0},"ctype":"number"}],"modifs":{}},{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":";","args":[{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"n"},{"ctype":"function","oper":"dF$1","args":[{"ctype":"function","oper":"ray$2","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"pos"},{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"froot"}],"modifs":{}}],"modifs":{}}]},{"ctype":"infix","oper":"=","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"n"},{"ctype":"infix","oper":"/","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"n"},{"ctype":"function","oper":"abs$1","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"n"}],"modifs":{}}]}]}]},{"ctype":"infix","oper":"+","args":[{"ctype":"infix","oper":"+","args":[{"ctype":"function","oper":"red$1","args":[{"ctype":"function","oper":"abs$1","args":[{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"n"},{"ctype":"function","oper":"genList","args":[{"ctype":"number","value":{"real":1,"imag":0}},{"ctype":"number","value":{"real":2,"imag":0}},{"ctype":"number","value":{"real":0,"imag":0}}],"modifs":{}}]}],"modifs":{}}],"modifs":{}},{"ctype":"function","oper":"green$1","args":[{"ctype":"function","oper":"abs$1","args":[{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"n"},{"ctype":"function","oper":"genList","args":[{"ctype":"number","value":{"real":0,"imag":0}},{"ctype":"number","value":{"real":1,"imag":0}},{"ctype":"number","value":{"real":2,"imag":0}}],"modifs":{}}]}],"modifs":{}}],"modifs":{}}]},{"ctype":"function","oper":"blue$1","args":[{"ctype":"function","oper":"abs$1","args":[{"ctype":"infix","oper":"*","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"n"},{"ctype":"function","oper":"genList","args":[{"ctype":"number","value":{"real":2,"imag":0}},{"ctype":"number","value":{"real":0,"imag":0}},{"ctype":"number","value":{"real":1,"imag":0}}],"modifs":{}}]}],"modifs":{}}],"modifs":{}}]}]}],"modifs":{}}]},"arglist":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"pos"}]}};};

generateColorPlotProgram(
{"ctype":"function","oper":"computeColor$1","args":[{"ctype":"variable","stack":[{"ctype":"undefined"}],"name":"#"}],"modifs":{}}
);
