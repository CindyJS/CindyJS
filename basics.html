<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
            <title>Cindy JS</title>
            <style type="text/css">
                </style>
            </head>
	<body style="font-family:Arial;">

        <script type="text/javascript" src="lib/Namespace.js"></script>
        <script type="text/javascript" src="lib/Number.js"></script>
        <script type="text/javascript" src="lib/List.js"></script>
        <script type="text/javascript" src="lib/Essentials.js"></script>
        <script type="text/javascript" src="lib/Operators.js"></script>
        <script type="text/javascript" src="lib/OpDrawing.js"></script>
        <script type="text/javascript" src="lib/Parser.js"></script>
        
        <h3> CindyScript in JavaScript</h3>
        
        
        <canvas id="CSCanvas" width="600" height="400"
            style="border:1px solid #000000;">
        </canvas>
        <br>
        <br>
        
        
        <script id='test' type='cindyscript'>
            err(4/1);
            err(3/7);
            err([1,2,3,4,5,6]/3);
            </script>
        
        
            <script id='src' type='cindyscript'>
                s=seconds();
                a=1;
                repeat(50000,
                       a=a+.001;
                       );
                err(a);
                err(seconds()-s);
                </script>
        
        <script id='bench2' type='cindyscript'>
            a=[1,2,3,4];
            b=a*3+i*[2,3,1,1];
            s=seconds();
            repeat(50000,
                   b=a*3+i*[2,3,1,1];
                   c=b*b;
                   );
            err(c);
            err(seconds()-s);
            
        </script>
        
        
        <script id='firstDrawing' type='cindyscript'>
            s=seconds();

            repeat(2500,i,
                   w=i*pi/180*137.508;
                   draw((cos(w),sin(w))*0.2*sqrt(i));
                   );
            err(seconds()-s);

            </script>
        
        
        
        <script id='primes' type='cindyscript'>
            
            
            
            
            s=seconds();
            
            teiler(n):=select(2..n-1,k,mod(n,k)==0);
            primes(n):=select(2..n,i,teiler(i)==[]);
            err(primes(100));
            err(seconds()-s);
            
            </script>

        
            <script type="text/javascript">
                
                var c=document.getElementById("CSCanvas");
                var csctx=c.getContext("2d");
              //  csctx.fillStyle="#FF0000";
              //  csctx.fillRect(0,0,150,75);
                var cscode=document.getElementById("firstDrawing").text;

         
                
                
                var seconds = new Date().getTime() / 1000;
                
                console.log(cscode);
                
                cscode=condense(cscode);
              //  console.log(cscode);
                var erg=analyse(cscode,false);
              //  report(erg,0);
                if(erg.ctype=='error'){
                    report(erg,0);
                }
              //  console.log(niceprint(erg));
                console.log('=========  RUNNING  =========');
                if(erg.ctype!='error') {
                    var eval=evaluate(erg);
                 //   report(eval,0);
                    console.log('=========  RESULT  =========');
                    console.log(niceprint(eval));
                }
                var needed = new Date().getTime() / 1000-seconds;
                console.log("Needed: "+needed+" seconds");
   
                
                </script>
            </body>
</html>